<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta http-equiv="Cache-Control" content="no-cache"/>
  <script type="text/javascript">
    var head  = document.getElementsByTagName('head')[0];
    var base = document.createElement("base");
    var url = sessionStorage.getItem("base_url");
    base.href = url;
    head.appendChild(base);
  </script>
  <title>Jenkins</title>
<style>
section{
  display: block;
}

body, div {
    padding: 0;
    margin: 0;
}
html, body {
    height: 100%;
}

#header {
    background:orange;
}
#container {
    background:blue;
}
#content {
    background:pink;
}
#footer {
    background:green;
}

.holder {   
  width: auto;
  display: inline-block;
}

.width70 {
  width: 70%; 
  height: auto;    
}​

.width30 {
  width: 30%; 
  height: auto;    
}​

.width100 {
  width: 100%; 
  height: auto;    
}​

.flex-init-setup {
     display: -webkit-box;
     display: -moz-box;
     display: -webkit-flex;
     display: -ms-flexbox;
     display: flex;
 }
 .flex-ppal-setup {
     -webkit-flex-flow: column wrap;
     -moz-flex-flow: column wrap;
     flex-flow: column wrap;
     -webkit-justify-content: center;
     -moz-justify-content: center;
     justify-content: center;
 }
 </style>

</head>
<body>

<section id="container flex-init-setup flex-ppal-setup">
<div class="header"> 
<h1>Web Calendar - Continuous Integration and Continous Deployment (CI/CD) using Jenkins</h1>
<br> <a href="">back</a> to login page 
<br> <a href="/detail2.html">back</a> to details of Automation used
<br> <a href="/integration.html">back</a> to details of SOAP Web Services Integration implemented
<br> <a href=/microservices-cosmosdb-azure.html> to details of Azure hosted scalable microservice based setup of this site</a> </h5>
</div>
</section>
<p></p>
<table border="1">
	<tr>
		<td>
			<h2 id="toc"> Table of Contents</h2>

			<br>1. <a href="/cicd.html#purpose">PURPOSE</a> 
			<br>
			<br>2. <a href="/cicd.html#whatItIntegratesWith">  WHAT DOES IT INTEGRATE WITH - ON PREM CI WITH JENKINS</a>
			<br>
			<br>3. <a href="/cicd.html#whyItIsImportant">WHY IS IT IMPORTANT</a>
			<br>
			<br>4. <a href="/cicd.html#howDoesItIntegrate"> HOW DOES IT INTEGRATE</a>
			<br>
			<br>5. <a href="/cicd.html#jenkinsXIntegration"><u>CLOUD HOSTED CI/CD - INTEGRATION WITH JENKINS X</u></a>
			
			<p style="text-indent: 20px"><a href="/cicd.html#5_1">5.1</a>How to Setup Jenkins X for CI/CD</p>
			<p style="text-indent: 20px"><a href="/cicd.html#5_2">5.2</a> Some Benefits of using Cloud hosted CI/CD</p>
			<p style="text-indent: 30px"><a href="/cicd.html#5_2_1">5.2.1</a> High Reliability</p>
			<p style="text-indent: 30px"><a href="/cicd.html#5_2_2">5.2.2</a> Benefits of containers</p>
			<p style="text-indent: 30px"><a href="/cicd.html#5_2_3">5.2.3</a> Multiple environments can be created on demand</p>
			<p style="text-indent: 40px"><a href="/cicd.html#5_2_3_1">5.2.3.1</a> PRE-REQ- Environment creation during application setup in Jenkins X</p>
			<p style="text-indent: 40px"><a href="/cicd.html#5_2_3_2">5.2.3.2</a> Scrum/Kanban Agile Iteration package scenario</p>
			<p style="text-indent: 40px"><a href="/cicd.html#5_2_3_3">5.2.3.3</a> Release branch created with fixes and a Pull Request (PR) to merge with main branch</p>
			<p style="text-indent: 40px"><a href="/cicd.html#5_2_3_4">5.2.3.4</a> Creation of pull request leads to Continous Integration (CI)</p>
			<p style="text-indent: 40px"><a href="/cicd.html#5_2_3_5">5.2.3.5</a> Deployment to Quality Assurance(QA)/Staging Environment on approval</p>						
			<p style="text-indent: 40px"><a href="/cicd.html#5_2_3_6">5.2.3.6</a> Promotion to the Production environment</p>
			<p style="text-indent: 30px"><a href="/cicd.html#5_2_4">5.2.4</a> DevOps Test Automation:</p>
			<p style="text-indent: 30px"><a href="/cicd.html#5_2_5">5.2.5</a> More Coming</p>
					
			<br> <a href="cicd.html" target="_top">Back to Top</a>
		</td>	
	</tr>
	<tr>
		<td>
		<div class="header">
			<h3 id="purpose">1. PURPOSE</h3>
				<h4>To demonstrate that it is possible to trigger and run automated regression tests automatically and remotely, every time a change is committed to a code repository. This is done for Cloud Hosted Continous Integration / Continous deployment (CI/CD) a.k.a Devops system and on premises CI/CD via Jenkins X and Jenkins, respectfully.</h4>
				<br> It is worth noting that Jenkins is an open source tool and <strong> completely free </strong>. The Jenkins X demostration here was done in Google cloud using free 'new starter' credit and with guidance from Trainings and tutorials on the web. 
				<br><br> <a href="/cicd.html#toc">Back to Table Of Contents</a>	
		</div>
		</td>
	</tr>
	<tr>	
		<td>
			<h3  id="whatItIntegratesWith">2. WHAT DOES IT INTEGRATE WITH - ON PREM CI WITH JENKINS</h3>
				<br> This application integrates with <strong>JENKINS</strong>, a continuous integration and continuous delivery open source tool.
				<br>
				<br> <a href="/cicd.html#toc">Back to Table Of Contents</a>
				<br>
		</td>
	</tr>			
	<tr>	
		<td>
			<h3 id="whyItIsImportant">3. WHY IS IT IMPORTANT</h3>
				<br> To understand the importance of what has been achieved, it will be helpful to understand the promise continous integration holds in terms of finding early defects for software testers.
				<br>
				<br><Strong>BACKGROUND FROM SOFTWARE TESTING PERSPECTIVE</Strong>
				<br>
				<br>WITHOUT CONTINUOUS INTEGRATION
				<br> 
				<br>In the past, several developers working on the same project using a configuration management tool like SVN,GIT etc. could checkin their changes to the code repository and run the build. This would continue till the application was built and ready to test, only then the functional and integration defect finding tasks could begin. Unfortunately in testing processes, the gnarly and critical task of regression defect finding due to coupled code tends to be the last of the tests planned to be run. Depending on the "software development lifecycle" followed, testing would only start days/weeks/months, essentially after the commencement of the project.
  				<br>
  				<br>WITH CONTINUOUS INTEGRATION
  				<br>
  				<br>It is a testing principle that the sooner the defects are found in software development, the cheaper they are to fix (Refer ISTQB principles). Continuous integration's benefit is that it allows us to find defects early. So, in a development team implementing continuous integration with say Jenkins, the automated regression tests could be added to the build process such that they are run every time the build is run by Jenkins. Jenkins can be configured to trigger a build after each change is committed/pushed to the code branch or scheduled nightly. This means that critical regression defects are found instantaneously as the code is being developed, rather than being found days/weeks/months later after the code is deployed to the test environment.
  				<br>	 
  				<br><strong>WHAT IT MEANS TO THE WEB CALENDAR APPLICATION</strong>
				<h4>This application is configured to auto-run Selenium tests using the TestNG framework right after the application build is triggered in Jenkins. It is important to note that the build is displayed to Jenkins viewers as a PASS only when the build passes and these tests pass. So critical defects are found instantly. See below for how it works:</h4>
				<br> <a href="/cicd.html#toc">Back to Table Of Contents</a>			 
		</td>
	</tr>
	<tr>	
		<td>
			<h3 id="howDoesItIntegrate">4. HOW DOES IT INTEGRATE</h3>
				<h4>Three step process was followed to achieve the integration:</h4>
				<table>
					<tr>
						<td>
							<h5>OBJECTIVE</h5>
								<br>Please see "WHAT IT MEANS TO THE WEB CALENDAR APPLICATION" in the "Why is it important" section <a href="/cicd.html#whyItIsImportant">above</a>.								 
								<br>
						</td>
					</tr>
					<tr>
						<td>
							<h5>PRE-REQUISITE</h5>
								<br>1. Selenium RC and TestNG running on Eclipse IDE (software development tool)
								<br>2. Openshift account setup with RHC and GIT configuration management tools setup.
								<br>3. Jenkins setup on localhost via placing the downloadable jenkins.war file into the webapps folder of Apache TOMCAT installation. 
								<br>4. Jenkins has "GIT" plugin installed								 
								<br>
						</td>
					</tr>
					<tr>
						<td>
							<h5>STEP 1</h5>
								<br> Setup the Git repository for the web calendar application so that its build can be run from Jenkins. 
								<br> What success meant: Builds for the Openshift web calendar application can be run remotely from Jenkins.
								<br>
								<br>The image below displays the Jenkins job for web calendar application.
								<br><div class="holder">
    									<img src="images/JenkinsCodeIntegration.jpg" class="width70"/>
								</div>
						</td>
					</tr>
					<tr>
						<td>
							<h5>STEP 2</h5>
								<br> Setup a Selenium automation regression test suite using TestNG framework for testing the application. 
								<br> What success meant: A selenium test suite exists for the application that can be run from command prompt.
								<br>
								<br>The image below displays the Test NGSelenium test suite.
								<br><div class="holder">
    									<img src="images/TestNGSeleniumTestSuite.jpg" class="width70"/>
								</div>
								<br>The image below displays the test suite can be run from command prompt.
								<br><div class="holder">
    									<img src="images/CMDTestNG.jpg" class="width70"/>
								</div>
								
						</td>
					</tr>
					<tr>
						<td>
							<h5>STEP 3</h5>
								<br>Setup Jenkins to run the automation test suite every time a build is triggered  
								<br>What success meant: Jenkins will run the automation scripts right after every application build.  
								<br>
								<br> The windows command prompt instructions to Jenkins to run the automation tests. 
								<br><div class="holder">
    									<img src="images/CMDJenkins.jpg" class="width70"/>
								</div>
						</td>
					</tr>
					<tr>
						<td>
							<h5>STEP 4</h5>
								<br>Test the running of the build in scenarios where automation tests pass and automation tests fail.  
    							<br>What success meant: the web calendar application's build passes when automation tests pass, and more importantly, it fails when automation tests fail even if the actual code build passed. 
    							<br>
    							<br> The image below displays how web calendar application build passes when the automation tests pass.
    							<br><div class="holder">
    									<img src="images/AutomatedTestsPass.jpg" class="width70"/>
								</div>
    							<br>
    							<br> The image below displays how web calendar application build fails when the automation tests fail, even if the build of the code branch succeeded.
    							<br><div class="holder">
    									<img src="images/AutomatedTestsFail.jpg" class="width70"/>
								</div>	
						</td>
					</tr>
				</table>	
				<br>
				<br> <a href="/cicd.html#toc">Back to Table Of Contents</a>			 
		</td>
	</tr>
	<tr>				
		<td>
			<h3  id="jenkinsXIntegration">5. CLOUD HOSTED CI/CD - INTEGRATION WITH 'JENKINS X version 3'</h3>
				<br> This application is now hosted on Git hub and it integrates with '<strong>JENKINS X</strong>', a continuous integration and continuous delivery open source tool for the cloud, which uses Docker containers and Kubernetes to manage CI/CD. Jenkins X is an opinionated CI/CD engine, i.e. it has been designed and built to address Devops and developer needs, e.g. when a commit is made to a git repository, Jenkins X is listening and it will trigger pipelines with specific knowledge of what files to add/change etc based on your build pack/application type (e.g. maven, nodejs, javascript etc.).
				<br><h4 id="5_1">5.1 To use Jenkins X CI/CD, following steps roughly need to be followed:</h4>
				<br><i id="5_1_1">5.1.1 Setup Jenkins Cluster: </i>In a cloud environment (I used google cloud but instructions for Azure, Amazon etc. available too), use the packages provided by Jenkins X to setup a Kubernetes cluster to host Jenkins X.
				<br><br><i id="5_1_2">5.1.2 Setup application repository in Cluster: </i>5.1.2 Use JX cli to import your project from a Source Control Manager e.g. Github, to Jenkins X Cluster.
				<br><h4 id="5_2">5.2 Some Benefits of using Cloud hosted CI/CD</h4>
				<br><i id="5_2_1">5.2.1 High Reliability</i>: Kubernetes offers high assurance as if one pod 'goes down'/hangs from e.g. a DDOS attack, a new pod is spawned near instantaneously and application returns. 
				<br><br><i id="5_2_2">5.2.2 Benefits of containers</i>: Kubernetes uses containers and they come with their benefits e.g. immutable, light weight, easily reusable due to yaml definition etc.
				<br><br><i id="5_2_3">5.2.3 Multiple environments can be created on demand - [default] Preview, Staging and Production</i>: 
				<br>Continous Deployment (CD) requires the Devops flow. This is best demostrated with an example:
				<br><br> <u id="5_2_3_1">5.2.3.1 PRE-REQ- Environment creation during application setup in Jenkins X:</u> When this WebCalendar application was imported in Jenkins X platform, the build logs showed two environments were created - Staging and Production. These were initiated by Jenkins X creating two pull requests on the repository (#6 and #7 for Staging and Production in this case, respectfully). 
				<br><div class="holder">
					<img src="images/JenkinsXDeploymentToEnvsInLogs.jpg" class="width70"/>
				</div>
				<br><br> These pull requests above corroborate with two pipelines running on Jenkins X UI (Octant) at the same time, from what I see deploying the app on separate containers for 'Staging' and 'Prod' in the pod created for the application in Jenkins X Kubernetes cluster: 
				<br><div class="holder">
					<img src="images/JenkinsXDeploymentToEnvs.jpg" class="width70"/>
				</div>

				<br> <br><u id="5_2_3_2">5.2.3.2 Scrum/Kanban Agile Iteration package scenario:</u> A fortnightly release is planned with bug/issue fixes, like two below:
				<br><br> Issue 2: Webpages have hardcoded urls
				<br><div class="holder">
					<img src="images/cicdIssue2.JPG" class="width70"/>
				</div>
				<br><br> Issue 3: Make the Jenkins repo for testdrivendevelopment the Production Repo
				<br><div class="holder">
					<img src="images/cicdIssue3.JPG" class="width70"/>
				</div>				
				<br><br> <u id="5_2_3_3">5.2.3.3 Release branch created with fixes and a Pull Request (PR) to merge with main branch:</u> 
				<br> Software Engineer creates a feature/release branch from main branch and makes fixes in it for release. Tests locally on his machine, then when ready creates a pull request to merge with repo's Main branch, in preparation for deployment to Production.
				<br> <i>Note: The pull request description lists the two issues above prefixed with "Resolves" keyword. What this means is that, in addition to they getting linked to the PR, if this Pull Request is successful (changes make it to main branch), then these issues will be auto closed.</i> 	
				<br><div class="holder">
					<img src="images/CicdInitialPullRequest.JPG" class="width70"/>
				</div>				
				<br><br><u id="5_2_3_4">5.2.3.4 Creation of pull request leads to Continous Integration (CI) -</u> Jenkins X auto builds code, runs CI automated tests and auto deploys to a preview environment (see figure below) if all preceding steps pass. The pipeline logs in JX UI (octant) can show any details of test failures. 
				<br><div class="holder">
					<img src="images/JenkinsXpreviewEnv.JPG" class="width70"/>
				</div>

				<br><br><u id="5_2_3_5">5.2.3.5 Deployment to Quality Assurance(QA)/Staging Environment on approval</u> - if the Authorised peer reviewer is happy with manual inspection in preview environment, a comment '/approve' can be placed in the PR from a person holding role of owner in the github repository. This will promote the preview environment to the Staging Environment.    
				<br><b>RESULT</b>: Following is a successful deployment of the application in staging environment (namespace: jx-staging):
				<br><div class="holder">
					<img src="images/JenkinsXStagingEnv.jpg" class="width70"/>
				</div>
				<br> <i>Note: Following this step (successful merge to Production) the feature branch auto destroy's itself.	This step also starts the process of Production deployment by auto creating a Github pull request for the Kubernetes Jenkins X cluster Repository (see step a)).</i>					
				<br> <br><u id="5_2_3_6">5.2.3.6 Promotion to the Production environment: </u> Once test people get sign-off on release from QA/Staging environment, Production deployment is next. This is a bigger deal than affecting just a application repo and thus requires approval on the Cluster Repository. Approval provided in Github via a comment on PR by an owner of the cluster repo:					
				<br><div class="holder">
					<img src="images/JenkinsXPromoteToProd.JPG" class="width70"/>
				</div>
				<br><br> <b>RESULT</b>: Following is a successful deployment of the application in Production environment (namespace: jx-Production):
				<br><i>Note: It is possible to setup custom DNS for achieving desired url names. I have not configured that in this production url yet.</i>
				<br><div class="holder">
					<img src="images/JenkinsX_CICD_Production.JPG" class="width70"/>
				</div>					
				
				<br><br> <i id="5_2_4"> 5.2.4 DevOps Test Automation</i>: Standard benefit of Continous Integration that you can have inbuilt quality as tests can be automated to run after the build.
				<br><br> Note: At the moment, it only show two tests, however, BDD/cucumber tests can also be wired here. BDD/Cucumber tests are explained in Test Automation link below.
				<br><div class="holder">
					<img src="images/TestAutomationEvindenceWithJenkinsX.jpg" class="width70"/>
				</div>	
				<br><br> <i id="5_2_5">5.2.5 More Coming</i>

				<br> <a href="cicd.html#toc">Back to Table Of Contents</a>
				<br>
		</td>
	</tr>			

</table>
<br> <br> <a href="">back</a> to login page 
 <br> [2016] For details on <u>Test Automation</u> used, please click <a href="/detail2.html" target="_top">here</a>
 <br> [2016] For details on <u>Web Services Integration</u> used, please click <a href="/integration.html" target="_top">here</a>
 <br> [2016] For details of <u>Continuous Integration and Continuous Deployment (CI/CD) using 'onprem and cloud Jenkins '</u> implemented, please click <a href="/cicd.html" target="_top">here</a>
 <br> [2023] For details of <u>Cloud hosting, microservice utilisation and cloud based scalable database use </u>, click <a href=/microservices-cosmosdb-azure.html target="_top">here</a> 

 <br><p></p>
  <h5>©Jay Sarna, Wellington, New Zealand - last update - June 2023</h5>
  <br> Please seek my permission before using and/or reproducing any content on this website. I am contactable via messenger on facebook.
</body>
</html>
        